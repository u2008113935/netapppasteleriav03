<?xml version="1.0" encoding="UTF-8" ?>
<Shell
    x:Class="apppasteleriav03.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:local="clr-namespace:apppasteleriav03.Views"
    Title="Delicia"
    FlyoutBehavior="Flyout">

    <!-- Toolbar - botones de la esquina superior derecha -->
    <Shell.ToolbarItems>
        <ToolbarItem IconImageSource="icon_profile.png" 
                     Order ="Primary"
                     Priority="0"
                     Clicked="OnEditProfileClicked"/>
        <ToolbarItem Text="Login" 
                     Order ="Primary"
                     Priority="1"
                     Clicked="OnLoginClicked"/>
    </Shell.ToolbarItems>

    <!-- FlyouHeader con avatar, nombre y boton para editar el perfil -->
    <Shell.FlyoutHeader>
        <Grid BackgroundColor="{StaticResource PrimaryColor}" Padding="12">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <Image Source="avatar_placeholder.png"
                   HeightRequest="56" WidthRequest="56"
                   Aspect="AspectFill"
                   Grid.Column="0"
                   VerticalOptions="Center"/>

                <StackLayout Grid.Column="1" VerticalOptions="Center" Spacing="2">
                    <Label Text="{Binding CurrentProfile.FullName}" 
                       TextColor="White" 
                       FontAttributes="Bold"/>
                    <Label Text="{Binding CurrentProfile.Email}"
                       TextColor="White"
                       FontSize="12"/>
                </StackLayout>

                <Button Grid.Column="2"
                    Text="Editar"
                    BackgroundColor="Transparent"
                    TextColor="White"
                    FontAttributes="Bold"
                    Clicked="OnEditProfileClicked"/>

        </Grid>
    </Shell.FlyoutHeader>


    <!-- TABBAR - Pestañas principales en la parte inferior -->
    <TabBar>

        <!-- Pestaña Catálogo -->
        <Tab Title="Catálogo" Icon="icon_home.png">
            <ShellContent Route="catalog" 
                          ContentTemplate="{DataTemplate local:MainPage}" />
        </Tab>
      
        <!-- Pestaña Pedidos -->
        <Tab Title="Pedidos" Icon="icon_orders.png">
            <ShellContent Route="orders" 
                          ContentTemplate="{DataTemplate local:OrdersPage}" />
        </Tab>

        <!-- Pestaña Seguimiento -->
        <Tab Title="Seguimiento" Icon="icon_cart.png">
            <ShellContent Route="cart" 
                    ContentTemplate="{DataTemplate local:LiveTrackingPage}" />
        </Tab>

    </TabBar>

</Shell>
